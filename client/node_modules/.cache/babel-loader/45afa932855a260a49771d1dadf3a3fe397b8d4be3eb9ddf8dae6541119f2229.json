{"ast":null,"code":"import React,{useState,useContext,useEffect,useRef}from'react';import\"./Comment.css\";import{useLocation}from'react-router-dom';import UserContext from'../../../context/UserContext';import Post from'../Post/Post';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Comment=props=>{const[replyCommentToPost,setReplyCommentToPost]=useState(\"\");const[showReplyButton,setShowReplyButton]=useState(false);const{username,setUsername}=useContext(UserContext);const location=useLocation();const replyBoxRef=useRef(null);useEffect(()=>{const handleClickOutside=event=>{if(replyBoxRef.current&&!replyBoxRef.current.contains(event.target)){setShowReplyButton(false);// Hide reply box when clicking outside\n}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);const changeReplyCommentToPost=event=>{setReplyCommentToPost(event.target.value);};const handleClickReplyButton=()=>{if(username==null){}else{setShowReplyButton(true);}};const handleReplySubmission=()=>{// Call the passed function\nprops.handleReplySubmission();};const handleClickSubmitReplyButton=async post=>{// print post?\nconst postId=props.post;const commentId=props.id;try{const response=await fetch(\"http://localhost:5000/api/comments/\".concat(postId,\"/\").concat(commentId),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({author:username,comment:replyCommentToPost,parentPost:props.parentPost,idOfParentPost:props.post,level:props.level+1,idOfParentComment:props.id})});if(response.ok){handleReplySubmission();setReplyCommentToPost(\"\");}else{console.error(\"Failed to post reply\");}}catch(error){console.error(\"Error posting reply:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-container\",style:{marginLeft:props.level*20+'px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-author\",children:[\"    \",props.author?props.author.toUpperCase():'Anonymous']}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-contents\",children:props.comment})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reply-section\",ref:replyBoxRef,children:[showReplyButton&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"reply-input\",value:replyCommentToPost,placeholder:\"Reply to this comment...\",onChange:changeReplyCommentToPost}),/*#__PURE__*/_jsxs(\"button\",{className:\"submit-reply-button\",onClick:()=>handleClickSubmitReplyButton(),children:[/*#__PURE__*/_jsx(\"span\",{className:\"reply-arrow\",children:\"\\u21B5\"}),\"Submit\"]})]}),!showReplyButton&&/*#__PURE__*/_jsxs(\"button\",{className:\"reply-button\",onClick:handleClickReplyButton,children:[/*#__PURE__*/_jsx(\"span\",{className:\"reply-arrow\",children:\"\\u21B5\"}),\"Reply\"]})]})]});};export default Comment;","map":{"version":3,"names":["React","useState","useContext","useEffect","useRef","useLocation","UserContext","Post","jsxs","_jsxs","jsx","_jsx","Comment","props","replyCommentToPost","setReplyCommentToPost","showReplyButton","setShowReplyButton","username","setUsername","location","replyBoxRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","changeReplyCommentToPost","value","handleClickReplyButton","handleReplySubmission","handleClickSubmitReplyButton","post","postId","commentId","id","response","fetch","concat","method","headers","body","JSON","stringify","author","comment","parentPost","idOfParentPost","level","idOfParentComment","ok","console","error","className","style","marginLeft","children","toUpperCase","ref","type","placeholder","onChange","onClick"],"sources":["C:/Users/frank/Desktop/3. Projects/1. Personal Projects/Boxing Website Stuff/Boxing Forum Website/client/src/components/Posts/Comment/Comment.js"],"sourcesContent":["\r\nimport React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport \"./Comment.css\";\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport UserContext from '../../../context/UserContext';\r\nimport Post from '../Post/Post';\r\n\r\n\r\n\r\nconst Comment = (props) => {\r\n    const [replyCommentToPost, setReplyCommentToPost] = useState(\"\");\r\n    const [showReplyButton, setShowReplyButton] = useState(false);\r\n\r\n    const { username, setUsername } = useContext(UserContext);\r\n    const location = useLocation();\r\n\r\n    const replyBoxRef = useRef(null);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (replyBoxRef.current && !replyBoxRef.current.contains(event.target)) {\r\n                setShowReplyButton(false); // Hide reply box when clicking outside\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, []);\r\n\r\n    const changeReplyCommentToPost = (event) => {\r\n        setReplyCommentToPost(event.target.value);\r\n    };\r\n\r\n    const handleClickReplyButton = () => {\r\n        if(username == null) {\r\n\r\n        }\r\n        else {\r\n            setShowReplyButton(true);\r\n        }\r\n    };\r\n\r\n    const handleReplySubmission = () => {\r\n        // Call the passed function\r\n\r\n        props.handleReplySubmission();\r\n    };\r\n\r\n    const handleClickSubmitReplyButton = async (post) => {\r\n        // print post?\r\n        const postId = props.post;\r\n        const commentId = props.id;\r\n\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/api/comments/${postId}/${commentId}`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({\r\n                    author: username,\r\n                    comment: replyCommentToPost,\r\n                    parentPost: props.parentPost,\r\n                    idOfParentPost: props.post,\r\n                    level: props.level + 1,\r\n                    idOfParentComment: props.id,\r\n                }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                handleReplySubmission();\r\n                setReplyCommentToPost(\"\");\r\n\r\n\r\n            } else {\r\n                console.error(\"Failed to post reply\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error posting reply:\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"comment-container\" style={{ marginLeft: props.level * 20 + 'px' }}>\r\n            <div className=\"comment-box\">\r\n\r\n                <div className=\"comment-author\">    {props.author ? props.author.toUpperCase() : 'Anonymous'}\r\n                </div>\r\n\r\n\r\n                <div className=\"comment-contents\">{props.comment}</div>\r\n            </div>\r\n\r\n\r\n            <div className=\"reply-section\" ref={replyBoxRef}>\r\n                {showReplyButton && (\r\n                    <div>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"reply-input\"\r\n                            value={replyCommentToPost}\r\n                            placeholder=\"Reply to this comment...\"\r\n                            onChange={changeReplyCommentToPost}\r\n                        />\r\n\r\n                        {/* <button className=\"submit-reply-button\" onClick={handleClickSubmitReplyButton}>\r\n                            Submit\r\n                        </button> */}\r\n                        <button className=\"submit-reply-button\" onClick={() => handleClickSubmitReplyButton()}>\r\n                            <span className=\"reply-arrow\">&#x21B5;</span>\r\n                            Submit\r\n\r\n                        </button>\r\n\r\n                    </div>\r\n                )\r\n                }\r\n\r\n                {!showReplyButton && (\r\n                    <button className=\"reply-button\" onClick={handleClickReplyButton}>\r\n                        <span className=\"reply-arrow\">&#x21B5;</span>\r\n                        Reply\r\n                    </button>\r\n                )}\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Comment;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}