{"ast":null,"code":"import React,{useState,useEffect}from'react';import\"./CreatePost.css\";import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CreatePost(){const[title,setTitle]=useState(\"\");const[content,setcontent]=useState(\"\");const[image,setImage]=useState(null);useEffect(()=>{// This will run every time `image` is updated\nif(image){console.log(\"final image : \",image);}},[image]);const handleImageChange=e=>{setImage(e.target.files[0]);};const handleCreatePostButtonClick=async()=>{// two fetch methods?\n// first fetch method 1) sends in the title and content to database, 2) initializes the multer instance\nconsole.log(\"starteD\");await fetch(\"http://localhost:5000/api/posts/createPostTitleAndContent\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({title:title,content:content})});console.log(\"finished?\");const formData=new FormData();if(image){console.log(\"yes image : \",image);formData.append(\"image\",image);// Append the image file\n}else{console.log(\"no image\");}console.log(\"FORM DATA : \",formData);// second fetch method uploads the image using the multer instance\nawait fetch(\"http://localhost:5000/api/posts/createPostImage\",{method:\"POST\",body:formData});};const changeTitle=event=>{setTitle(event.target.value);};const changecontent=event=>{setcontent(event.target.value);};function adjustHeight(event){const textarea=event.target;textarea.style.height='auto';// Reset height\ntextarea.style.height=\"\".concat(textarea.scrollHeight,\"px\");// Set height to scrollHeight\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"create-new-post-title-input\",placeholder:\"Title\",onChange:changeTitle}),/*#__PURE__*/_jsx(\"textarea\",{id:\"create-new-post-content-input\",placeholder:\"Content\",onChange:changecontent,onInput:adjustHeight}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image-input\",accept:\"image/*\",onChange:handleImageChange,required:true}),/*#__PURE__*/_jsx(\"button\",{id:\"create-new-post-submit-button\",onClick:handleCreatePostButtonClick,children:\"Create New Post\"})]});}export default CreatePost;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","CreatePost","title","setTitle","content","setcontent","image","setImage","console","log","handleImageChange","e","target","files","handleCreatePostButtonClick","fetch","method","headers","body","JSON","stringify","formData","FormData","append","changeTitle","event","value","changecontent","adjustHeight","textarea","style","height","concat","scrollHeight","className","children","id","placeholder","onChange","onInput","type","accept","required","onClick"],"sources":["C:/Users/frank/Desktop/3. Projects/1. Personal Projects/Boxing Website Stuff/Boxing Forum Website/client/src/components/Pages/CreatePost/CreatePost.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport \"./CreatePost.css\";\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction CreatePost() {\r\n\r\n    const [title, setTitle] = useState(\"\");\r\n    const [content, setcontent] = useState(\"\");\r\n    const [image, setImage] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // This will run every time `image` is updated\r\n        if (image) {\r\n            console.log(\"final image : \", image);\r\n        }\r\n    }, [image]);\r\n\r\n    const handleImageChange = (e) => {\r\n        setImage(e.target.files[0]);\r\n    };\r\n\r\n\r\n    const handleCreatePostButtonClick = async () => {\r\n        // two fetch methods?\r\n        // first fetch method 1) sends in the title and content to database, 2) initializes the multer instance\r\n        console.log(\"starteD\");\r\n        await fetch(\"http://localhost:5000/api/posts/createPostTitleAndContent\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                title: title,\r\n                content: content,\r\n            })\r\n        })\r\n\r\n\r\n        console.log(\"finished?\");\r\n        const formData = new FormData();\r\n\r\n        if (image) {\r\n            console.log(\"yes image : \", image);\r\n            formData.append(\"image\", image); // Append the image file\r\n        }\r\n        else {\r\n            console.log(\"no image\");\r\n        }\r\n\r\n        console.log(\"FORM DATA : \", formData);\r\n        // second fetch method uploads the image using the multer instance\r\n        await fetch(\"http://localhost:5000/api/posts/createPostImage\", {\r\n            method: \"POST\",\r\n            body: formData,\r\n        })\r\n\r\n\r\n    };\r\n\r\n    const changeTitle = (event) => {\r\n        setTitle(event.target.value);\r\n    };\r\n    const changecontent = (event) => {\r\n        setcontent(event.target.value);\r\n    };\r\n\r\n    function adjustHeight(event) {\r\n        const textarea = event.target;\r\n        textarea.style.height = 'auto'; // Reset height\r\n        textarea.style.height = `${textarea.scrollHeight}px`; // Set height to scrollHeight\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <input\r\n                id=\"create-new-post-title-input\"\r\n                placeholder=\"Title\"\r\n                onChange={changeTitle}\r\n            ></input>\r\n            <textarea\r\n                id=\"create-new-post-content-input\"\r\n                placeholder=\"Content\"\r\n                onChange={changecontent}\r\n                onInput={adjustHeight}\r\n            ></textarea>\r\n            <input type=\"file\" id=\"image-input\" accept=\"image/*\" onChange={handleImageChange} required>\r\n\r\n            </input>\r\n\r\n            <button\r\n                id=\"create-new-post-submit-button\"\r\n                onClick={handleCreatePostButtonClick}\r\n            >\r\n                Create New Post\r\n            </button>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default CreatePost;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}